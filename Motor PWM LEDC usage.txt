#include <Arduino.h>

#define PWM_FREQ 30000    // PWM frequency in Hz
#define PWM_RESOLUTION 10 // PWM resolution in bits

#define Right_motor_Plus 17
#define Right_motor_Minus 48
#define Left_motor_Plus 7
#define Left_motor_Minus 8

void Motor_Set_PWM(int left, int right);

void setup()
{
  ledcSetup(0, PWM_FREQ, PWM_RESOLUTION);
  ledcAttachPin(Right_motor_Plus, 0);
  ledcSetup(1, PWM_FREQ, PWM_RESOLUTION);
  ledcAttachPin(Right_motor_Minus, 1);
  ledcSetup(2, PWM_FREQ, PWM_RESOLUTION);
  ledcAttachPin(Left_motor_Plus, 2);
  ledcSetup(3, PWM_FREQ, PWM_RESOLUTION);
  ledcAttachPin(Left_motor_Minus, 3);
}

void loop()
{
  Motor_Set_PWM(400, 400); // Example usage of Motor_Set_PWM function
  delay(1000);           // Run for 1 second
}

void Motor_Set_PWM(int left, int right)
{
  if ((left == 0) && (right == 0))
  {
    ledcWrite(3, 0);
    ledcWrite(1, 0);
    ledcWrite(0, 0);
    ledcWrite(2, 0);
  }
  else if ((left <= 0) && (right <= 0))
  {
    ledcWrite(3, abs(left));
    ledcWrite(1, abs(right));
    ledcWrite(0, 0);
    ledcWrite(2, 0);
  }
  else if ((left >= 0) && (right <= 0))
  {
    ledcWrite(2, left);
    ledcWrite(1, abs(right));
    ledcWrite(3, 0);
    ledcWrite(0, 0);
  }
  else if ((left >= 0) && (right >= 0))
  {
    ledcWrite(2, left);
    ledcWrite(0, right);
    ledcWrite(3, 0);
    ledcWrite(1, 0);
  }
  else if ((left <= 0) && (right >= 0))
  {
    ledcWrite(3, abs(left));
    ledcWrite(0, right);
    ledcWrite(2, 0);
    ledcWrite(1, 0);
  }
}
